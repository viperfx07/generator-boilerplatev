//- Custom Configuration
block config
	//- Setup site's base URL to match the "baseUrl" key within `package.json`
	//- Otherwise default to relative pathing
	- var baseUrl = config.baseUrl || './'
	- var assetsDir = '<%= assetsDir %>'
	- var cssDir = assetsDir + '/<%= templatePackage.config.directories.styles.replace(/^_/, "") %>'
	- var jsDir = assetsDir + '/<%= templatePackage.config.directories.scripts.replace(/^_/, "") %>'

block childConfig

block includes
	include ../_mixins/**/*.pug

doctype
<!--[if IE 8]>
<html class="no-js lt-ie10 lt-ie9">
<![endif]-->
<!--[if IE 9]>
<html class="no-js lt-ie10">
<![endif]-->
!= "<!--[if gt IE 9]><!-->"
html.no-js
	!= "<!--<![endif]-->"
	head
		meta(charset='utf-8')
		meta(http-equiv='X-UA-Compatible', content='IE=edge')

		meta(content="#",name="description")
		meta(content="#4285f4", name="theme-color")

		//-# Mobile Viewport Scaling
		meta(content="True",name="HandheldFriendly")
		meta(content="320",name="MobileOptimized")
		meta(content="width=device-width,initial-scale=1",name="viewport")
		meta(content="no",name="user-scalable")
		//-#

		meta(name="dns-prefetch", content="https://cdn.jsdelivr.net/")
		meta(name="dns-prefetch", content="https://cdn.polyfill.io/")

		title <%= _.titleize(projectName) %>

		//- Icons
		link(rel='icon', type="image/x-icon", href='/favicon.ico')
		link(rel='apple-touch-icon', href="/apple-touch-icon.png")

		//- CSS
		// Critical CSS
		// TODO: Critical CSS needs to be
		// 1. Loaded by back-end script
		// 2. Loaded once before main.css is cached
		// ref: https://iamsteve.me/blog/entry/using-cookies-to-serve-critical-css-for-first-time-visits
		style(id="boilerplatev-crit-css")
		// END Critical CSS

		link(rel='preload', href=cssDir + '/main.css', as='style', onload="this.rel='stylesheet'")
		noscript
			link(rel='stylesheet', href=cssDir + '/main.css')
		script.
			/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
			!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
			/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */
			!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);
	body
		header.c-header
			block header
				include ../_partials/header.pug
		main
			block content

		footer.c-footer
			block footer
				include ../_partials/footer.pug

		script(defer src="https://cdn.polyfill.io/v2/polyfill.min.js?features=default,matchMedia,modernizr:placeholder,Array.prototype.includes,Array.prototype.find,Array.prototype.findIndex,Array.from,Element.prototype.dataset")
		script(defer src="https://cdn.jsdelivr.net/combine/npm/jquery@3/dist/jquery.js,npm/react@16.4.0/umd/react.development.js,npm/react-dom@16.4.0/umd/react-dom.development.js,npm/prop-types@15.6.1/prop-types.js,npm/mobx@3.3.0/lib/mobx.umd.js,npm/mobx-react@4.3.2/index.js,npm/jquery-validation@1.17.0/dist/jquery.validate.js")

		//- how to make it read the arguments
		script(defer src= jsDir + '/manifest.js')
		script(defer src= jsDir + '/vendor.js')
		script(defer src= jsDir + '/main.js')
		//- Google Analytics: change UA-XXXXX-X to be your site's ID.
		//-
			script
			(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
			function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
			e=o.createElement(i);r=o.getElementsByTagName(i)[0];
			e.src='//www.google-analytics.com/analytics.js';
			r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
			ga('create','UA-XXXXX-X');ga('send','pageview');
